services:
  gardener:
    build: ./gardener
    ports:
      - "8000:8000"
    volumes:
      - ./athena:/data  # The Brain (source of truth)
    env_file: .env

  scribe:
    build: ./scribe
    ports:
      - "3000:3000"
    depends_on:
      - gardener
    environment:
      - GARDNER_URL=http://gardener:8000

# MCP Server: Run locally with `uv run python mcp_server.py` in gardener/
# Or add to Claude Desktop config:
#   "athena": {
#     "command": "uv",
#     "args": ["run", "python", "mcp_server.py"],
#     "cwd": "/path/to/pkms/gardener",
#     "env": { "DATA_DIR": "/path/to/pkms/athena" }
#   }
